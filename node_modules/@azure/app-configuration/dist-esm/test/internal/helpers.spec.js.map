{"version":3,"file":"helpers.spec.js","sourceRoot":"","sources":["../../../test/internal/helpers.spec.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport {\n  checkAndFormatIfAndIfNoneMatch,\n  formatFiltersAndSelect,\n  extractAfterTokenFromNextLink,\n  quoteETag,\n  makeConfigurationSettingEmpty,\n  transformKeyValue,\n  transformKeyValueResponseWithStatusCode,\n  transformKeyValueResponse,\n  formatFieldsForSelect,\n  serializeAsConfigurationSettingParam\n} from \"../../src/internal/helpers\";\nimport { assert } from \"chai\";\nimport {\n  ConfigurationSetting,\n  ConfigurationSettingParam,\n  featureFlagContentType,\n  HttpResponseField,\n  HttpResponseFields,\n  secretReferenceContentType\n} from \"../../src\";\nimport { HttpHeaders } from \"@azure/core-http\";\nimport { FeatureFlagValue } from \"../../src/featureFlag\";\nimport { SecretReferenceValue } from \"../../src/secretReference\";\n\ndescribe(\"helper methods\", () => {\n  it(\"checkAndFormatIfAndIfNoneMatch\", () => {\n    const key = \"ignored\";\n\n    assert.deepEqual(\n      {\n        ifMatch: undefined,\n        ifNoneMatch: undefined\n      },\n      checkAndFormatIfAndIfNoneMatch({ key }, {})\n    );\n\n    assert.deepEqual(\n      {\n        ifMatch: '\"hello\"',\n        ifNoneMatch: undefined\n      },\n      checkAndFormatIfAndIfNoneMatch(\n        { key, etag: \"hello\" },\n        {\n          onlyIfUnchanged: true\n        }\n      )\n    );\n\n    assert.deepEqual(\n      {\n        ifNoneMatch: '\"hello\"',\n        ifMatch: undefined\n      },\n      checkAndFormatIfAndIfNoneMatch(\n        { key, etag: \"hello\" },\n        {\n          onlyIfChanged: true\n        }\n      )\n    );\n  });\n\n  it(\"checkAndFormatIfAndIfNoneMatch - mutually exclusive\", () => {\n    const key = \"ignored\";\n\n    assert.throws(\n      () =>\n        checkAndFormatIfAndIfNoneMatch(\n          { key, etag: \"won't get used\" },\n          {\n            onlyIfChanged: true,\n            onlyIfUnchanged: true\n          }\n        ),\n      /onlyIfChanged and onlyIfUnchanged are mutually-exclusive/\n    );\n  });\n\n  describe(\"quoteETag\", () => {\n    it(\"undefined\", () => {\n      assert.equal(undefined, quoteETag(undefined));\n\n      assert.equal('\"etagishere\"', quoteETag(\"etagishere\"));\n\n      assert.equal(\"'etagishere'\", quoteETag(\"'etagishere'\"));\n\n      assert.equal(\"*\", quoteETag(\"*\"));\n    });\n  });\n\n  describe(\"formatWildcards\", () => {\n    it(\"undefined\", () => {\n      const result = formatFiltersAndSelect({\n        keyFilter: undefined,\n        labelFilter: undefined\n      });\n\n      assert.ok(!result.key);\n      assert.ok(!result.label);\n    });\n\n    it(\"single values only\", () => {\n      const result = formatFiltersAndSelect({\n        keyFilter: \"key1\",\n        labelFilter: \"label1\"\n      });\n\n      assert.equal(\"key1\", result.key);\n      assert.equal(\"label1\", result.label);\n    });\n\n    it(\"multiple values\", () => {\n      const result = formatFiltersAndSelect({\n        keyFilter: \"key1,key2\",\n        labelFilter: \"label1,label2\"\n      });\n\n      assert.equal(\"key1,key2\", result.key);\n      assert.equal(\"label1,label2\", result.label);\n    });\n\n    it(\"fields map properly\", () => {\n      const result = formatFiltersAndSelect({\n        fields: [\"isReadOnly\", \"value\"]\n      });\n\n      assert.deepEqual([\"locked\", \"value\"], result.select);\n    });\n  });\n\n  describe(\"extractAfterTokenFromNextLink\", () => {\n    it(\"token is extracted and properly unescaped\", () => {\n      const token = extractAfterTokenFromNextLink(\"/kv?key=someKey&api-version=1.0&after=bGlah%3D\");\n      assert.equal(\"bGlah=\", token);\n    });\n  });\n\n  describe(\"serializeAsConfigurationSettingParam\", () => {\n    [`[]`, \"Hello World\"].forEach((value) => {\n      // These values are unexpected for feature flag or secret reference config setting\n      // These tests make sure the latest version supports such settings where the value is unexpected\n      // as well because the older versions of the SDK support such cases.\n      // These tests make sure the SDK is not broken for the users with such use cases.\n      it(`serializer doesn't throw on ${value} as feature flag value`, () => {\n        const featureFlag: ConfigurationSetting<FeatureFlagValue> = {\n          contentType: featureFlagContentType,\n          key: \"key\",\n          isReadOnly: false,\n          value: { conditions: { clientFilters: [] }, enabled: true }\n        };\n        featureFlag.value = value as any;\n        assert.deepEqual(\n          serializeAsConfigurationSettingParam(featureFlag),\n          (featureFlag as unknown) as ConfigurationSettingParam<string>,\n          \"setting was modified\"\n        );\n      });\n\n      it(`serializer doesn't throw on ${value} as secret reference value`, () => {\n        const setting: ConfigurationSetting<SecretReferenceValue> = {\n          contentType: secretReferenceContentType,\n          key: \"key\",\n          isReadOnly: false,\n          value: { secretId: \"abc\" }\n        };\n        setting.value = value as any;\n        assert.deepEqual(\n          serializeAsConfigurationSettingParam(setting),\n          setting as any,\n          \"setting was modified\"\n        );\n      });\n    });\n  });\n\n  const fakeHttp204Response: HttpResponseField<any> = {\n    _response: {\n      request: {\n        url: \"unused\",\n        abortSignal: {\n          aborted: true,\n          // eslint-disable-next-line @typescript-eslint/no-empty-function\n          addEventListener: () => {},\n          // eslint-disable-next-line @typescript-eslint/no-empty-function\n          removeEventListener: () => {}\n        },\n        method: \"GET\",\n        withCredentials: false,\n        headers: new HttpHeaders(),\n        timeout: 0,\n        requestId: \"\",\n        clone: function() {\n          return this;\n        },\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        validateRequestProperties: () => {},\n        prepare: function() {\n          return this;\n        }\n      },\n      status: 204,\n      headers: new HttpHeaders(),\n      bodyAsText: \"\",\n      parsedHeaders: {}\n    }\n  };\n\n  it(\"makeConfigurationSettingEmpty\", () => {\n    const response: ConfigurationSetting & HttpResponseField<any> & HttpResponseFields = {\n      key: \"mykey\",\n      statusCode: 204,\n      isReadOnly: false,\n      ...fakeHttp204Response\n    };\n\n    makeConfigurationSettingEmpty(response);\n\n    // key isn't touched\n    assert.equal(\"mykey\", response.key);\n\n    for (const name of getAllConfigurationSettingFieldsMinusKey()) {\n      assert.ok(!response[name], name);\n    }\n\n    // These point is these properties are untouched and won't throw\n    // since they're the only properties the user is allowed to touch on these\n    // \"body empty\" objects.\n    assert.equal(204, response._response.status);\n    assert.equal(204, response.statusCode);\n  });\n\n  it(\"transformKeyValue\", () => {\n    const configurationSetting = transformKeyValue({\n      key: \"hello\",\n      locked: true\n    });\n\n    assert.deepEqual(configurationSetting, {\n      // the 'locked' property should not be present in the object since\n      // it should be 'renamed' to readOnly\n      isReadOnly: true,\n      key: \"hello\",\n      value: undefined\n    });\n  });\n\n  it(\"transformKeyValueResponseWithStatusCode\", () => {\n    const configurationSetting = transformKeyValueResponseWithStatusCode({\n      key: \"hello\",\n      locked: true,\n      ...fakeHttp204Response\n    });\n\n    const actualKeys = Object.keys(configurationSetting).sort();\n\n    // _response is explictly set to not enumerate, even in our copied object.\n    assert.deepEqual(actualKeys, [\"isReadOnly\", \"key\", \"statusCode\", \"value\"]);\n\n    // now make it enumerable so we can do our comparison\n    Object.defineProperty(configurationSetting, \"_response\", {\n      enumerable: true\n    });\n\n    assert.deepEqual(configurationSetting, {\n      isReadOnly: true,\n      key: \"hello\",\n      value: undefined,\n      statusCode: 204,\n      _response: fakeHttp204Response._response\n    });\n  });\n\n  it(\"transformKeyValueResponse\", () => {\n    const configurationSetting = transformKeyValueResponse({\n      key: \"hello\",\n      locked: true,\n      ...fakeHttp204Response\n    });\n\n    const actualKeys = Object.keys(configurationSetting).sort();\n\n    // _response is explictly set to not enumerate, even in our copied object.\n    assert.deepEqual(actualKeys, [\"isReadOnly\", \"key\", \"value\"]);\n\n    // now make it enumerable so we can do our comparison\n    Object.defineProperty(configurationSetting, \"_response\", {\n      enumerable: true\n    });\n\n    assert.deepEqual(configurationSetting, {\n      isReadOnly: true,\n      key: \"hello\",\n      value: undefined,\n      _response: fakeHttp204Response._response\n    });\n  });\n\n  it(\"normalizeFilterFields\", () => {\n    const fields = getAllConfigurationSettingFields();\n\n    assert.deepEqual(formatFieldsForSelect(fields)!.sort(), [\n      \"content_type\",\n      \"etag\",\n      \"key\",\n      \"label\",\n      \"last_modified\",\n      \"locked\", // isReadOnly maps to this\n      \"tags\",\n      \"value\"\n    ]);\n\n    assert.ok(formatFieldsForSelect(undefined) === undefined);\n    assert.deepEqual(formatFieldsForSelect([]), []);\n  });\n\n  /**\n   * Gets all the properties from ConfigurationSetting, sorted ascending.\n   *\n   * @returns All property names, sorted ascending.\n   */\n  function getAllConfigurationSettingFields(): (keyof ConfigurationSetting)[] {\n    const configObjectWithAllFieldsRequired: Required<ConfigurationSetting> = {\n      contentType: \"\",\n      etag: \"\",\n      key: \"\",\n      label: \"\",\n      lastModified: new Date(),\n      isReadOnly: true,\n      tags: {},\n      value: \"\"\n    };\n\n    return Object.keys(configObjectWithAllFieldsRequired).sort() as (keyof ConfigurationSetting)[];\n  }\n\n  function getAllConfigurationSettingFieldsMinusKey(): Exclude<\n    keyof ConfigurationSetting,\n    \"key\"\n  >[] {\n    const keys = getAllConfigurationSettingFields().filter((key) => key !== \"key\");\n\n    return keys as Exclude<keyof ConfigurationSetting, \"key\">[];\n  }\n});\n"]}